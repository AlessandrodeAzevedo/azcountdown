/*
    Name   : az-countdown
    version: v0.1
    author : @alessandrodeazevedo
    license: MIT
*/
class AzCountdown{elementID="AzCountdown";uri;key;uniqId=this.guidGenerator();date=new Date(Date.now()+6048e5);labels=[];customLayout=[];constructor(e=null){this.labels.days="DAYS",this.labels.hours="HOURS",this.labels.minutes="MINUTES",this.labels.seconds="SECONDS",e&&(void 0!==e.elementID&&(this.elementID=e.elementID),void 0!==e.date&&(this.date=new Date(e.date)),void 0!==e.key&&(this.key=e.key),void 0!==e.uri&&(this.uri=e.uri),void 0!==e.labels&&(void 0!==e.labels.days&&(this.labels.days=e.labels.days),void 0!==e.labels.hours&&(this.labels.hours=e.labels.hours),void 0!==e.labels.minutes&&(this.labels.minutes=e.labels.minutes),void 0!==e.labels.seconds&&(this.labels.seconds=e.labels.seconds)),void 0!==e.customLayout&&(void 0!==e.customLayout.days&&(this.customLayout.days="#"+e.customLayout.days),void 0!==e.customLayout.hours&&(this.customLayout.hours="#"+e.customLayout.hours),void 0!==e.customLayout.minutes&&(this.customLayout.minutes="#"+e.customLayout.minutes),void 0!==e.customLayout.seconds&&(this.customLayout.seconds="#"+e.customLayout.seconds))),this.uri?this.fileGetContents(this.uri):this.printCount(this.date)}guidGenerator(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()}azCreateElement(e,t,s=!1){let o=document.getElementById("azCountdown_"+this.uniqId),n=document.createElement("div");n.style.backgroundColor="white",n.style.textAlign="center",n.style.minWidth="55px",n.style.padding="15px 10px",n.style.borderRadius="5px";let i=document.createElement("div");i.style.fontFamily="Oswald, sans-serif",i.style.fontSize="45px",i.innerHTML=0,i.id=t+"_"+this.uniqId;let a=document.createElement("div");a.style.color="rgb(155, 155, 155)",a.style.fontSize="10px",a.style.fontFamily='Arial, "Helvetica Neue", Helvetica, sans-serif',s&&(n.style.backgroundColor="rgba(208,2,27,1)",i.style.color="white",a.style.color="white"),a.innerHTML=e,n.appendChild(i),n.appendChild(a),o.appendChild(n)}azCountdownSetCounter(n,i,a,l,u){setInterval(function(){var e=(new Date).getTime(),t=n-e,s=0<=(s=Math.floor(t/864e5))?s:0,o=0<=(o=Math.floor(t%864e5/36e5))?o:0,e=0<=(e=Math.floor(t%36e5/6e4))?e:0,t=0<=(t=Math.floor(t%6e4/1e3))?t:0;i&&(document.querySelector(i).innerHTML=s),a&&(document.querySelector(a).innerHTML=o),l&&(document.querySelector(l).innerHTML=e),u&&(document.querySelector(u).innerHTML=t)},1e3)}async fileGetContents(e){let t=await fetch(e),s=await t.text();var o=(new DOMParser).parseFromString(s,"text/html").getElementsByTagName("az-countdown");for(let e=0;o.length>e;e++){var n=JSON.parse(o[e].innerHTML);n.key==this.key&&this.printCount(new Date(n.date))}}printCount(s){if(Object.keys(this.customLayout).length){var o=this.customLayout.days,n=this.customLayout.hours,i=this.customLayout.minutes,a=this.customLayout.seconds;this.azCountdownSetCounter(s,o,n,i,a)}else{let e=document.getElementById(this.elementID),t=document.createElement("div");t.style.display="flex",t.style.justifyContent="space-around",t.style.padding="20px 10px",t.id="azCountdown_"+this.uniqId,e.appendChild(t),this.azCreateElement(this.labels.days,"azDays"),this.azCreateElement(this.labels.hours,"azHours"),this.azCreateElement(this.labels.minutes,"azMinutes"),this.azCreateElement(this.labels.seconds,"azSeconds",!0);o="#azDays_"+this.uniqId,n="#azHours_"+this.uniqId,i="#azMinutes_"+this.uniqId,a="#azSeconds_"+this.uniqId;this.azCountdownSetCounter(s,o,n,i,a)}}}